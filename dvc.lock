schema: '2.0'
stages:
  download:
    cmd: wget https://s3.amazonaws.com/fast-ai-imageclas/imagenette2-160.tgz -O data/received/imagenette2-160.tgz
    outs:
    - path: data/received/imagenette2-160.tgz
      hash: md5
      md5: e793b78cc4c9e9a4ccc0c1155377a412
      size: 99003388
  extract:
    cmd: tar -xzvf data/received/imagenette2-160.tgz -C data/raw
    deps:
    - path: data/received/imagenette2-160.tgz
      hash: md5
      md5: e793b78cc4c9e9a4ccc0c1155377a412
      size: 99003388
    outs:
    - path: data/raw/imagenette2-160
      hash: md5
      md5: c5261f96ce891b0da90173fb43f3950d.dir
      size: 107794109
      nfiles: 13397
  setup-raw:
    cmd: ln -svfnr data/raw/imagenette2-160/noisy_imagenette.csv data/raw/imagenette2-160/train
      data/raw/imagenette2-160/val data/raw/
    deps:
    - path: data/raw/imagenette2-160
      hash: md5
      md5: c5261f96ce891b0da90173fb43f3950d.dir
      size: 107794109
      nfiles: 13397
    outs:
    - path: data/raw/train
      hash: md5
      md5: 7adc7abb69056f4d7afb512c78f2fce9.dir
      size: 75309082
      nfiles: 9470
    - path: data/raw/val
      hash: md5
      md5: 0ad4dcf197b452735726bf8d8777201d.dir
      size: 31248080
      nfiles: 3925
  prepare:
    cmd: python src/prepare.py
    deps:
    - path: data/raw/train
      hash: md5
      md5: 7adc7abb69056f4d7afb512c78f2fce9.dir
      size: 75309082
      nfiles: 9470
    - path: data/raw/val
      hash: md5
      md5: 0ad4dcf197b452735726bf8d8777201d.dir
      size: 31248080
      nfiles: 3925
    outs:
    - path: data/prepared/test.csv
      hash: md5
      md5: 4431d3b717631e96dde1e6dd4ef0bb45
      size: 88060
    - path: data/prepared/train.csv
      hash: md5
      md5: 8bec576e601fc41bc332e1f12071164d
      size: 218191
  train:
    cmd: python src/train.py
    deps:
    - path: data/prepared/test.csv
      hash: md5
      md5: 4431d3b717631e96dde1e6dd4ef0bb45
      size: 88060
    - path: data/prepared/train.csv
      hash: md5
      md5: 8bec576e601fc41bc332e1f12071164d
      size: 218191
    outs:
    - path: model/model.joblib
      hash: md5
      md5: 5f9aa6416defef37d68bbefdc6ddbf8d
      size: 241148
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/prepared/test.csv
      hash: md5
      md5: 4431d3b717631e96dde1e6dd4ef0bb45
      size: 88060
    - path: model/model.joblib
      hash: md5
      md5: 5f9aa6416defef37d68bbefdc6ddbf8d
      size: 241148
    outs:
    - path: metrics/accuracy.json
      hash: md5
      md5: 4ea94a6ad52ff19f61dc2fa677279bd5
      size: 32

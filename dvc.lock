schema: '2.0'
stages:
  download:
    cmd: wget https://s3.amazonaws.com/fast-ai-imageclas/imagenette2-160.tgz -O data/received/imagenette2-160.tgz
    outs:
    - path: data/received/imagenette2-160.tgz
      hash: md5
      md5: e793b78cc4c9e9a4ccc0c1155377a412
      size: 99003388
  extract:
    cmd: tar -xzvf data/received/imagenette2-160.tgz -C data/raw
    deps:
    - path: data/received/imagenette2-160.tgz
      hash: md5
      md5: e793b78cc4c9e9a4ccc0c1155377a412
      size: 99003388
    outs:
    - path: data/raw/imagenette2-160
      hash: md5
      md5: c5261f96ce891b0da90173fb43f3950d.dir
      size: 107794109
      nfiles: 13397
  setup-raw:
    cmd: ln -svfnr data/raw/imagenette2-160/noisy_imagenette.csv data/raw/imagenette2-160/train
      data/raw/imagenette2-160/val data/raw/
    deps:
    - path: data/raw/imagenette2-160
      hash: md5
      md5: c5261f96ce891b0da90173fb43f3950d.dir
      size: 107794109
      nfiles: 13397
    outs:
    - path: data/raw/train
      hash: md5
      md5: 7adc7abb69056f4d7afb512c78f2fce9.dir
      size: 75309082
      nfiles: 9470
    - path: data/raw/val
      hash: md5
      md5: 0ad4dcf197b452735726bf8d8777201d.dir
      size: 31248080
      nfiles: 3925
  prepare:
    cmd: python src/prepare.py
    deps:
    - path: data/raw/train
      hash: md5
      md5: 7adc7abb69056f4d7afb512c78f2fce9.dir
      size: 75309082
      nfiles: 9470
    - path: data/raw/val
      hash: md5
      md5: 0ad4dcf197b452735726bf8d8777201d.dir
      size: 31248080
      nfiles: 3925
    - path: src/prepare.py
      hash: md5
      md5: ef804f358e00edcfe52c865b471f8f55
      size: 1231
    outs:
    - path: data/prepared/test.csv
      hash: md5
      md5: 4431d3b717631e96dde1e6dd4ef0bb45
      size: 88060
    - path: data/prepared/train.csv
      hash: md5
      md5: 8bec576e601fc41bc332e1f12071164d
      size: 218191
  train:
    cmd: python src/train.py
    deps:
    - path: data/prepared/train.csv
      hash: md5
      md5: 8bec576e601fc41bc332e1f12071164d
      size: 218191
    - path: src/train.py
      hash: md5
      md5: ad34e87f4d781a9d01979df26ca69fca
      size: 1325
    outs:
    - path: model/model.joblib
      hash: md5
      md5: 4a6e8aca05072f04e6ecd131cb1d4ea8
      size: 241148
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/prepared/test.csv
      hash: md5
      md5: 4431d3b717631e96dde1e6dd4ef0bb45
      size: 88060
    - path: model/model.joblib
      hash: md5
      md5: 4a6e8aca05072f04e6ecd131cb1d4ea8
      size: 241148
    - path: src/evaluate.py
      hash: md5
      md5: b197277667d6269271fff4ae4af8a941
      size: 645
    outs:
    - path: metrics/accuracy.json
      hash: md5
      md5: 15711cfe487f4f9438abfefcbd576eff
      size: 32
